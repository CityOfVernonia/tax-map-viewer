import{dO as Ds,h as mt}from"./index.3224a022.js";function Rs(l,u){const o=xt[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function Js(l,u){const o=xt[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const xt={min:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.min.apply(Math,l[0])},max:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.max.apply(Math,l[0])},avg:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Tt(l[0])},sum:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:ks(l[0])},stddev:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sqrt(gt(l[0]))},count:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].length},var:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:gt(l[0])}};function Tt(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u/l.length}function ks(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u}function gt(l){const u=Tt(l),o=l.length;let p=0;for(const i of l)p+=(i-u)**2;return o>1?p/(o-1):0}class F{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(u){if(u.precision!==null||u.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(u){const o=new F;return o.second=u/1e3,o}static createFromValueAndQualifer(u,o,p){let i=null;const v=new F;if(v.op=p==="-"?"-":"+",o.type==="interval-period"){F._fixDefaults(o);const m=new RegExp("^[0-9]{1,}$");if(o.period==="year"||o.period==="month")throw new Error("Year-Month Intervals not supported");if(!m.test(u))throw new Error("Illegal Interval");v[o.period]=parseFloat(u)}else{if(F._fixDefaults(o.start),F._fixDefaults(o.end),o.start.period==="year"||o.start.period==="month")throw new Error("Year-Month Intervals not supported");if(o.end.period==="year"||o.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(o.start.period){case"day":switch(o.end.period){case"hour":if(i=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v[o.start.period]=parseFloat(u.split(" ")[0]),v[o.end.period]=parseFloat(u.split(" ")[1]);break;case"minute":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1])}break;case"second":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(o.end.period){case"minute":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v.hour=parseFloat(u.split(":")[0]),v.minute=parseFloat(u.split(":")[1]);break;case"second":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(o.end.period!=="second")throw new Error("Invalid Interval.");if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.minute=parseFloat(m[0]),v.second=parseFloat(m[1])}break;default:throw new Error("Invalid Interval.")}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function At(l,u){const o=It[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function Us(l,u){const o=It[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const It={extract:{minParams:2,maxParams:2,evaluate:([l,u])=>{if(u==null)return null;if(u instanceof Date)switch(l.toUpperCase()){case"SECOND":return u.getSeconds();case"MINUTE":return u.getMinutes();case"HOUR":return u.getHours();case"DAY":return u.getDate();case"MONTH":return u.getMonth()+1;case"YEAR":return u.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(l.length===2){const[u,o]=l;return u==null||o==null?null:u.toString().substring(o-1)}if(l.length===3){const[u,o,p]=l;return u==null||o==null||p==null?null:p<=0?"":u.toString().substring(o-1,o+p-1)}}},position:{minParams:2,maxParams:2,evaluate:([l,u])=>l==null||u==null?null:u.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{const u=l.length===3,o=u?l[1]:" ",p=u?l[2]:l[1];if(o==null||p==null)return null;const i=`(${Ds(o)})`;switch(l[0]){case"BOTH":return p.replace(new RegExp(`^${i}*|${i}*$`,"g"),"");case"LEADING":return p.replace(new RegExp(`^${i}*`,"g"),"");case"TRAILING":return p.replace(new RegExp(`${i}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.cos(l[0])},tan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0]>0?1:l[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const u=l[0],o=l.length===2?10**l[1]:1;return u==null?null:Math.round(u*o)/o}},truncate:{minParams:1,maxParams:2,evaluate:l=>l[0]==null?null:l.length===1?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>typeof l[0]=="string"||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:l=>{let u="";for(let o=0;o<l.length;o++){if(l[o]==null)return null;u+=l[o].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toUpperCase()}};var wt,yt,Et={exports:{}};yt=function(){function l(i,v){function m(){this.constructor=i}m.prototype=v.prototype,i.prototype=new m}function u(i,v,m,t){var w=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(w,u.prototype),w.expected=v,w.found=m,w.location=t,w.name="SyntaxError",w}function o(i,v,m){return m=m||" ",i.length>v?i:(v-=i.length,i+(m+=m.repeat(v)).slice(0,v))}function p(i,v){var m,t={},w=(v=v!==void 0?v:{}).grammarSource,A={start:Ve},I=Ve,k="!",O="=",x=">=",S=">",L="<=",C="<>",Dt="<",Ee="!=",ie="+",le="-",Rt="*",Jt="/",kt="@",Se="'",Ce="N'",$="''",Ut=".",Ht="null",Vt="true",qt="false",Bt="in",jt="is",Yt="like",zt="escape",Gt="not",Wt="and",$t="or",Kt="between",Zt="from",Qt="for",Xt="substring",en="extract",tn="trim",nn="position",rn="timestamp",an="date",un="leading",sn="trailing",on="both",ln="to",cn="interval",fn="year",pn="month",vn="day",hn="hour",dn="minute",mn="second",gn="case",wn="end",yn="when",Nn="then",bn="else",xn=",",Tn="(",An=")",_e="`",In=/^[A-Za-z_\x80-\uFFFF]/,En=/^[A-Za-z0-9_]/,Sn=/^[A-Za-z0-9_.\x80-\uFFFF]/,Pe=/^[^']/,Cn=/^[0-9]/,_n=/^[eE]/,Pn=/^[+\-]/,Fn=/^[ \t\n\r]/,Fe=/^[^`]/,Ln=g("!",!1),Le=g("=",!1),Mn=g(">=",!1),On=g(">",!1),Dn=g("<=",!1),Rn=g("<>",!1),Jn=g("<",!1),kn=g("!=",!1),ce=g("+",!1),fe=g("-",!1),Un=g("*",!1),Hn=g("/",!1),Vn=D([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),qn=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Bn=D([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),jn=g("@",!1),Me=g("'",!1),Yn=g("N'",!1),Oe=g("''",!1),De=D(["'"],!0,!1),zn=g(".",!1),Gn=D([["0","9"]],!1,!1),Wn=D(["e","E"],!1,!1),$n=D(["+","-"],!1,!1),Kn=g("NULL",!0),Zn=g("TRUE",!0),Qn=g("FALSE",!0),Xn=g("IN",!0),er=g("IS",!0),tr=g("LIKE",!0),nr=g("ESCAPE",!0),rr=g("NOT",!0),ar=g("AND",!0),ur=g("OR",!0),sr=g("BETWEEN",!0),or=g("FROM",!0),ir=g("FOR",!0),lr=g("SUBSTRING",!0),cr=g("EXTRACT",!0),fr=g("TRIM",!0),pr=g("POSITION",!0),vr=g("TIMESTAMP",!0),hr=g("DATE",!0),dr=g("LEADING",!0),mr=g("TRAILING",!0),gr=g("BOTH",!0),wr=g("TO",!0),yr=g("INTERVAL",!0),Nr=g("YEAR",!0),br=g("MONTH",!0),xr=g("DAY",!0),Tr=g("HOUR",!0),Ar=g("MINUTE",!0),Ir=g("SECOND",!0),Er=g("CASE",!0),Sr=g("END",!0),Cr=g("WHEN",!0),_r=g("THEN",!0),Pr=g("ELSE",!0),Fr=g(",",!1),Lr=g("(",!1),Mr=g(")",!1),Or=D([" ","	",`
`,"\r"],!1,!1),Re=g("`",!1),Je=D(["`"],!0,!1),Dr=function(e){return e},Rr=function(e,r){var a={type:"expression-list"},s=Os(e,r);return a.value=s,a},Jr=function(e,r){return G(e,r)},kr=function(e,r){return G(e,r)},Ur=function(e){return Ls("NOT",e)},Hr=function(e,r){return r==""||r==null||r==null?e:r.type=="arithmetic"?G(e,r.tail):dt(r.op,e,r.right,r.escape)},Vr=function(e){return{type:"arithmetic",tail:e}},qr=function(e,r){return{op:e+"NOT",right:r}},Br=function(e,r){return{op:e,right:r}},jr=function(e,r,a){return{op:"NOT"+e,right:{type:"expression-list",value:[r,a]}}},Yr=function(e,r,a){return{op:e,right:{type:"expression-list",value:[r,a]}}},zr=function(e){return e[0]+" "+e[2]},Gr=function(e){return e[0]+" "+e[2]},Wr=function(e,r,a){return{op:e,right:r,escape:a.value}},$r=function(e,r){return{op:e,right:r,escape:""}},Kr=function(e,r){return{op:e,right:r}},Zr=function(e){return{op:e,right:{type:"expression-list",value:[]}}},Qr=function(e,r){return{op:e,right:r}},Xr=function(e,r){return G(e,r)},ea=function(e,r){return G(e,r)},ta=function(e){return e.paren=!0,e},na=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},ra=function(e){return e},aa=function(e,r){return e+r.join("")},ua=function(e,r){return e+r.join("")},sa=function(e){return{type:"parameter",value:e[1]}},oa=function(e,r){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},r]}}},ia=function(e,r,a){return{type:"function",name:"substring",args:{type:"expression-list",value:a?[e,r,a[2]]:[e,r]}}},la=function(e,r,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e!=null?e:"BOTH"},r,a]}}},ca=function(e,r){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e!=null?e:"BOTH"},r]}}},fa=function(e,r){return{type:"function",name:"position",args:{type:"expression-list",value:[e,r]}}},pa=function(e,r){return{type:"function",name:e,args:r||{type:"expression-list",value:[]}}},va=function(e){return{type:"timestamp",value:e.value}},ha=function(e,r,a){return{type:"interval",value:r,qualifier:a,op:e}},da=function(e,r){return{type:"interval",value:e,qualifier:r,op:""}},ma=function(e,r){return{type:"interval-qualifier",start:e,end:r}},ga=function(e,r){return{type:"interval-period",period:e.value,precision:r,secondary:null}},wa=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},ya=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Na=function(e,r){return{type:"interval-period",period:"second",precision:e,secondary:r}},ba=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},xa=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Ta=function(e,r){return{type:"interval-period",period:e.value,precision:r,secondary:null}},Aa=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Ia=function(e,r){return{type:"interval-period",period:"second",precision:e,secondary:r}},Ea=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Sa=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Ca=function(){return{type:"string",value:"day"}},_a=function(){return{type:"string",value:"hour"}},Pa=function(){return{type:"string",value:"minute"}},Fa=function(){return{type:"string",value:"month"}},La=function(){return{type:"string",value:"year"}},Ma=function(e){return parseFloat(e)},Oa=function(e){return parseFloat(e)},Da=function(e){return{type:"date",value:e.value}},Ra=function(){return{type:"null",value:null}},Ja=function(){return{type:"boolean",value:!0}},ka=function(){return{type:"boolean",value:!1}},ke=function(){return"'"},Ua=function(e){return{type:"string",value:e.join("")}},Ha=function(e,r){return{type:"case-expression",format:"simple",operand:e,clauses:r,else:null}},Va=function(e,r,a){return{type:"case-expression",format:"simple",operand:e,clauses:r,else:a.value}},qa=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},Ba=function(e,r){return{type:"case-expression",format:"searched",clauses:e,else:r.value}},ja=function(e,r){return{type:"when-clause",operand:e,value:r}},Ya=function(e,r){return{type:"when-clause",operand:e,value:r}},za=function(e){return{type:"else-clause",value:e}},Ga=function(e){return{type:"number",value:e}},Wa=function(e,r,a){return parseFloat(e+r+a)},$a=function(e,r){return parseFloat(e+r)},Ka=function(e,r){return parseFloat(e+r)},Za=function(e){return parseFloat(e)},Qa=function(e,r){return e[0]+r},Xa=function(e){return"."+(e!=null?e:"")},eu=function(e,r){return e+r},tu=function(e){return e.join("")},nu=function(e,r){return"e"+(r===null?"":r)},ru=function(){return"IN"},au=function(){return"IS"},uu=function(){return"LIKE"},su=function(){return"ESCAPE"},ou=function(){return"NOT"},iu=function(){return"AND"},lu=function(){return"OR"},cu=function(){return"BETWEEN"},fu=function(){return"FROM"},pu=function(){return"FOR"},vu=function(){return"SUBSTRING"},hu=function(){return"EXTRACT"},du=function(){return"TRIM"},mu=function(){return"POSITION"},gu=function(){return"TIMESTAMP"},wu=function(){return"DATE"},yu=function(){return"LEADING"},Nu=function(){return"TRAILING"},bu=function(){return"BOTH"},xu=function(){return"TO"},Tu=function(){return"INTERVAL"},Au=function(){return"YEAR"},Iu=function(){return"MONTH"},Eu=function(){return"DAY"},Su=function(){return"HOUR"},Cu=function(){return"MINUTE"},_u=function(){return"SECOND"},Pu=function(){return"CASE"},Fu=function(){return"END"},Lu=function(){return"WHEN"},Mu=function(){return"THEN"},Ou=function(){return"ELSE"},Du=function(e){return e},Ru=function(e){return e.join("")},n=0,K=[{line:1,column:1}],M=0,pe=[],c=0;if("startRule"in v){if(!(v.startRule in A))throw new Error(`Can't start parsing from rule "`+v.startRule+'".');I=A[v.startRule]}function g(e,r){return{type:"literal",text:e,ignoreCase:r}}function D(e,r,a){return{type:"class",parts:e,inverted:r,ignoreCase:a}}function Ju(){return{type:"end"}}function Ue(e){var r,a=K[e];if(a)return a;for(r=e-1;!K[r];)r--;for(a={line:(a=K[r]).line,column:a.column};r<e;)i.charCodeAt(r)===10?(a.line++,a.column=1):a.column++,r++;return K[e]=a,a}function He(e,r){var a=Ue(e),s=Ue(r);return{source:w,start:{offset:e,line:a.line,column:a.column},end:{offset:r,line:s.line,column:s.column}}}function h(e){n<M||(n>M&&(M=n,pe=[]),pe.push(e))}function ku(e,r,a){return new u(u.buildMessage(e,r),e,r,a)}function Ve(){var e,r;return e=n,f(),(r=E())!==t?(f(),e=Dr(r)):(n=e,e=t),e}function qe(){var e,r,a,s,d,N,b,T;if(e=n,(r=E())!==t){for(a=[],s=n,d=f(),(N=se())!==t?(b=f(),(T=E())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(N=se())!==t?(b=f(),(T=E())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);e=Rr(r,a)}else n=e,e=t;return e}function E(){var e,r,a,s,d,N,b,T;if(e=n,(r=ve())!==t){for(a=[],s=n,d=f(),(N=rt())!==t?(b=f(),(T=ve())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(N=rt())!==t?(b=f(),(T=ve())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);e=Jr(r,a)}else n=e,e=t;return e}function ve(){var e,r,a,s,d,N,b,T;if(e=n,(r=Z())!==t){for(a=[],s=n,d=f(),(N=re())!==t?(b=f(),(T=Z())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(N=re())!==t?(b=f(),(T=Z())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);e=kr(r,a)}else n=e,e=t;return e}function Z(){var e,r,a,s,d;return e=n,(r=z())===t&&(r=n,i.charCodeAt(n)===33?(a=k,n++):(a=t,c===0&&h(Ln)),a!==t?(s=n,c++,i.charCodeAt(n)===61?(d=O,n++):(d=t,c===0&&h(Le)),c--,d===t?s=void 0:(n=s,s=t),s!==t?r=a=[a,s]:(n=r,r=t)):(n=r,r=t)),r!==t?(a=f(),(s=Z())!==t?e=Ur(s):(n=e,e=t)):(n=e,e=t),e===t&&(e=Uu()),e}function Uu(){var e,r,a;return e=n,(r=R())!==t?(f(),(a=Hu())===t&&(a=null),e=Hr(r,a)):(n=e,e=t),e}function Hu(){var e;return(e=Vu())===t&&(e=Yu())===t&&(e=Bu())===t&&(e=qu())===t&&(e=ju()),e}function Vu(){var e,r,a,s,d,N;if(e=[],r=n,a=f(),(s=Be())!==t?(d=f(),(N=R())!==t?r=a=[a,s,d,N]:(n=r,r=t)):(n=r,r=t),r!==t)for(;r!==t;)e.push(r),r=n,a=f(),(s=Be())!==t?(d=f(),(N=R())!==t?r=a=[a,s,d,N]:(n=r,r=t)):(n=r,r=t);else e=t;return e!==t&&(e=Vr(e)),e}function Be(){var e;return i.substr(n,2)===x?(e=x,n+=2):(e=t,c===0&&h(Mn)),e===t&&(i.charCodeAt(n)===62?(e=S,n++):(e=t,c===0&&h(On)),e===t&&(i.substr(n,2)===L?(e=L,n+=2):(e=t,c===0&&h(Dn)),e===t&&(i.substr(n,2)===C?(e=C,n+=2):(e=t,c===0&&h(Rn)),e===t&&(i.charCodeAt(n)===60?(e=Dt,n++):(e=t,c===0&&h(Jn)),e===t&&(i.charCodeAt(n)===61?(e=O,n++):(e=t,c===0&&h(Le)),e===t&&(i.substr(n,2)===Ee?(e=Ee,n+=2):(e=t,c===0&&h(kn)))))))),e}function qu(){var e,r,a,s;return e=n,(r=tt())!==t?(f(),(a=z())!==t?(f(),(s=R())!==t?e=qr(r,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=tt())!==t?(f(),(a=R())!==t?e=Br(r,a):(n=e,e=t)):(n=e,e=t)),e}function Bu(){var e,r,a,s,d,N;return e=n,(r=z())!==t?(f(),(a=at())!==t?(f(),(s=R())!==t?(f(),(d=re())!==t?(f(),(N=R())!==t?e=jr(a,s,N):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=at())!==t?(f(),(a=R())!==t?(f(),(s=re())!==t?(f(),(d=R())!==t?e=Yr(r,a,d):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function je(){var e,r,a,s,d;return e=n,r=n,(a=z())!==t?(s=f(),(d=nt())!==t?r=a=[a,s,d]:(n=r,r=t)):(n=r,r=t),r!==t&&(r=zr(r)),(e=r)===t&&(e=nt()),e}function he(){var e,r,a,s,d;return e=n,r=n,(a=z())!==t?(s=f(),(d=Ne())!==t?r=a=[a,s,d]:(n=r,r=t)):(n=r,r=t),r!==t&&(r=Gr(r)),(e=r)===t&&(e=Ne()),e}function ju(){var e,r,a,s;return e=n,(r=je())!==t?(f(),(a=q())!==t?(f(),ys()!==t?(f(),(s=ye())!==t?e=Wr(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=je())!==t?(f(),(a=q())!==t?e=$r(r,a):(n=e,e=t)):(n=e,e=t)),e}function Yu(){var e,r,a,s;return e=n,(r=he())!==t?(f(),(a=_())!==t?(f(),(s=qe())!==t?(f(),P()!==t?e=Kr(r,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=he())!==t?(f(),(a=_())!==t?(f(),(s=P())!==t?e=Zr(r):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=he())!==t?(f(),(a=we())!==t?e=Qr(r,a):(n=e,e=t)):(n=e,e=t))),e}function R(){var e,r,a,s,d,N,b,T;if(e=n,(r=de())!==t){for(a=[],s=n,d=f(),(N=Ye())!==t?(b=f(),(T=de())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(N=Ye())!==t?(b=f(),(T=de())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);e=Xr(r,a)}else n=e,e=t;return e}function Ye(){var e;return i.charCodeAt(n)===43?(e=ie,n++):(e=t,c===0&&h(ce)),e===t&&(i.charCodeAt(n)===45?(e=le,n++):(e=t,c===0&&h(fe))),e}function de(){var e,r,a,s,d,N,b,T;if(e=n,(r=me())!==t){for(a=[],s=n,d=f(),(N=ze())!==t?(b=f(),(T=me())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);s!==t;)a.push(s),s=n,d=f(),(N=ze())!==t?(b=f(),(T=me())!==t?s=d=[d,N,b,T]:(n=s,s=t)):(n=s,s=t);e=ea(r,a)}else n=e,e=t;return e}function ze(){var e;return i.charCodeAt(n)===42?(e=Rt,n++):(e=t,c===0&&h(Un)),e===t&&(i.charCodeAt(n)===47?(e=Jt,n++):(e=t,c===0&&h(Hn))),e}function me(){var e,r;return(e=ts())===t&&(e=$u())===t&&(e=Ku())===t&&(e=Zu())===t&&(e=Qu())===t&&(e=Xu())===t&&(e=cs())===t&&(e=zu())===t&&(e=we())===t&&(e=n,_()!==t?(f(),(r=E())!==t?(f(),P()!==t?e=ta(r):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function zu(){var e;return(e=Gu())!==t&&(e=na(e)),e}function Gu(){var e;return(e=Wu())!==t&&(e=ra(e)),e}function Wu(){var e,r,a,s;if(e=n,(r=ge())!==t){for(a=[],s=We();s!==t;)a.push(s),s=We();e=aa(r,a)}else n=e,e=t;return e}function Ge(){var e,r,a,s;if(e=n,(r=ge())!==t){for(a=[],s=y();s!==t;)a.push(s),s=y();e=ua(r,a)}else n=e,e=t;return e}function ge(){var e;return In.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Vn)),e}function y(){var e;return En.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(qn)),e}function We(){var e;return Sn.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Bn)),e}function we(){var e,r,a;return e=n,i.charCodeAt(n)===64?(r=kt,n++):(r=t,c===0&&h(jn)),r!==t&&(a=Ge())!==t?e=r=[r,a]:(n=e,e=t),e!==t&&(e=sa(e)),e}function $u(){var e,r,a;return e=n,xs()!==t?(f(),_()!==t?(f(),(r=es())!==t?(f(),be()!==t?(f(),(a=E())!==t?(f(),P()!==t?e=oa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ku(){var e,r,a,s,d,N,b;return e=n,bs()!==t?(f(),_()!==t?(f(),(r=E())!==t?(f(),be()!==t?(f(),(a=E())!==t?(f(),s=n,(d=Ns())!==t?(N=f(),(b=E())!==t?s=d=[d,N,b,f()]:(n=s,s=t)):(n=s,s=t),s===t&&(s=null),(d=P())!==t?e=ia(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Zu(){var e,r,a,s;return e=n,ut()!==t?(f(),_()!==t?(f(),(r=$e())===t&&(r=null),f(),(a=E())!==t?(f(),be()!==t?(f(),(s=E())!==t?(f(),P()!==t?e=la(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,ut()!==t?(f(),_()!==t?(f(),(r=$e())===t&&(r=null),f(),(a=E())!==t?(f(),P()!==t?e=ca(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function $e(){var e;return(e=Es())===t&&(e=Ss())===t&&(e=Cs()),e}function Qu(){var e,r,a;return e=n,Ts()!==t?(f(),_()!==t?(f(),(r=E())!==t?(f(),Ne()!==t?(f(),(a=E())!==t?(f(),P()!==t?e=fa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Xu(){var e,r,a;return e=n,(r=Fs())!==t?(f(),_()!==t?(f(),(a=qe())===t&&(a=null),f(),P()!==t?e=pa(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function es(){var e;return(e=ot())===t&&(e=it())===t&&(e=lt())===t&&(e=ct())===t&&(e=ft())===t&&(e=U()),e}function ts(){var e;return(e=ye())===t&&(e=vs())===t&&(e=ls())===t&&(e=is())===t&&(e=os())===t&&(e=ns())===t&&(e=rs()),e}function ns(){var e,r;return e=n,As()!==t?(f(),(r=q())!==t?e=va(r):(n=e,e=t)):(n=e,e=t),e}function rs(){var e,r,a,s;return e=n,st()!==t?(f(),i.charCodeAt(n)===45?(r=le,n++):(r=t,c===0&&h(fe)),r===t&&(i.charCodeAt(n)===43?(r=ie,n++):(r=t,c===0&&h(ce))),r!==t?(f(),(a=q())!==t?(f(),(s=Ke())!==t?e=ha(r,a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,st()!==t?(f(),(r=q())!==t?(f(),(a=Ke())!==t?e=da(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)),e}function Ke(){var e,r,a;return e=n,(r=as())!==t?(f(),_s()!==t?(f(),(a=us())!==t?e=ma(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=ss()),e}function as(){var e,r,a;return e=n,(r=Y())!==t?(f(),_()!==t?(f(),(a=X())!==t?(f(),P()!==t?e=ga(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Y())!==t&&(r=wa(r)),e=r),e}function us(){var e,r,a,s;return e=n,(r=Y())!==t&&(r=ya(r)),(e=r)===t&&(e=n,(r=U())!==t?(f(),_()!==t?(f(),(a=X())!==t?(f(),se()!==t?(f(),(s=Q())!==t?(f(),P()!==t?e=Na(a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t?(f(),_()!==t?(f(),(a=X())!==t?(f(),P()!==t?e=ba(a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t&&(r=xa()),e=r))),e}function ss(){var e,r,a,s;return e=n,(r=Y())!==t?(f(),_()!==t?(f(),(a=Q())!==t?(f(),P()!==t?e=Ta(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=Y())!==t&&(r=Aa(r)),(e=r)===t&&(e=n,(r=U())!==t?(f(),_()!==t?(f(),(a=X())!==t?(f(),se()!==t?(f(),(s=Q())!==t?(f(),P()!==t?e=Ia(a,s):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t?(f(),_()!==t?(f(),(a=Q())!==t?(f(),P()!==t?e=Ea(a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e===t&&(e=n,(r=U())!==t&&(r=Sa()),e=r)))),e}function Y(){var e,r;return e=n,(r=lt())!==t&&(r=Ca()),(e=r)===t&&(e=n,(r=ct())!==t&&(r=_a()),(e=r)===t&&(e=n,(r=ft())!==t&&(r=Pa()),(e=r)===t&&(e=n,(r=it())!==t&&(r=Fa()),(e=r)===t&&(e=n,(r=ot())!==t&&(r=La()),e=r)))),e}function Q(){var e;return(e=B())!==t&&(e=Ma(e)),e}function X(){var e;return(e=B())!==t&&(e=Oa(e)),e}function os(){var e,r;return e=n,Is()!==t?(f(),(r=q())!==t?e=Da(r):(n=e,e=t)):(n=e,e=t),e}function is(){var e;return(e=ms())!==t&&(e=Ra()),e}function ls(){var e,r;return e=n,(r=gs())!==t&&(r=Ja()),(e=r)===t&&(e=n,(r=ws())!==t&&(r=ka()),e=r),e}function q(){var e;return(e=ye())===t&&(e=we()),e}function ye(){var e,r,a,s,d;if(e=n,i.charCodeAt(n)===39?(r=Se,n++):(r=t,c===0&&h(Me)),r===t&&(i.substr(n,2)===Ce?(r=Ce,n+=2):(r=t,c===0&&h(Yn))),r!==t){for(a=[],s=n,i.substr(n,2)===$?(d=$,n+=2):(d=t,c===0&&h(Oe)),d!==t&&(d=ke()),(s=d)===t&&(Pe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(De)));s!==t;)a.push(s),s=n,i.substr(n,2)===$?(d=$,n+=2):(d=t,c===0&&h(Oe)),d!==t&&(d=ke()),(s=d)===t&&(Pe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(De)));i.charCodeAt(n)===39?(s=Se,n++):(s=t,c===0&&h(Me)),s!==t?e=Ua(a):(n=e,e=t)}else n=e,e=t;return e}function cs(){var e;return(e=fs())===t&&(e=ps()),e}function fs(){var e,r,a,s,d;if(e=n,ae()!==t)if(f(),(r=E())!==t){for(f(),a=[],s=te();s!==t;)a.push(s),s=te();s=f(),(d=ue())!==t?e=Ha(r,a):(n=e,e=t)}else n=e,e=t;else n=e,e=t;if(e===t)if(e=n,ae()!==t)if(f(),(r=E())!==t){for(f(),a=[],s=te();s!==t;)a.push(s),s=te();s=f(),(d=Ze())!==t?(f(),ue()!==t?e=Va(r,a,d):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;else n=e,e=t;return e}function ps(){var e,r,a,s;if(e=n,ae()!==t){for(f(),r=[],a=ee();a!==t;)r.push(a),a=ee();a=f(),(s=ue())!==t?e=qa(r):(n=e,e=t)}else n=e,e=t;if(e===t)if(e=n,ae()!==t){for(f(),r=[],a=ee();a!==t;)r.push(a),a=ee();a=f(),(s=Ze())!==t?(f(),ue()!==t?e=Ba(r,s):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function ee(){var e,r,a;return e=n,pt()!==t?(f(),(r=E())!==t?(f(),vt()!==t?(f(),(a=E())!==t?e=ja(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function te(){var e,r,a;return e=n,pt()!==t?(f(),(r=E())!==t?(f(),vt()!==t?(f(),(a=E())!==t?e=Ya(r,a):(n=e,e=t)):(n=e,e=t)):(n=e,e=t)):(n=e,e=t),e}function Ze(){var e,r;return e=n,Ps()!==t?(f(),(r=E())!==t?e=za(r):(n=e,e=t)):(n=e,e=t),e}function vs(){var e,r,a,s;return e=n,(r=hs())!==t?(a=n,c++,s=ge(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Ga(r):(n=e,e=t)):(n=e,e=t),e}function hs(){var e,r,a,s;return e=n,(r=ne())!==t&&(a=Qe())!==t&&(s=Xe())!==t?e=Wa(r,a,s):(n=e,e=t),e===t&&(e=n,(r=ne())!==t&&(a=Qe())!==t?e=$a(r,a):(n=e,e=t),e===t&&(e=n,(r=ne())!==t&&(a=Xe())!==t?e=Ka(r,a):(n=e,e=t),e===t&&(e=n,(r=ne())!==t&&(r=Za(r)),e=r))),e}function ne(){var e,r,a;return(e=B())===t&&(e=n,i.charCodeAt(n)===45?(r=le,n++):(r=t,c===0&&h(fe)),r===t&&(i.charCodeAt(n)===43?(r=ie,n++):(r=t,c===0&&h(ce))),r!==t&&(a=B())!==t?e=Qa(r,a):(n=e,e=t)),e}function Qe(){var e,r,a;return e=n,i.charCodeAt(n)===46?(r=Ut,n++):(r=t,c===0&&h(zn)),r!==t?((a=B())===t&&(a=null),e=Xa(a)):(n=e,e=t),e}function Xe(){var e,r,a;return e=n,(r=ds())!==t&&(a=B())!==t?e=eu(r,a):(n=e,e=t),e}function B(){var e,r;if(e=[],(r=et())!==t)for(;r!==t;)e.push(r),r=et();else e=t;return e!==t&&(e=tu(e)),e}function et(){var e;return Cn.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Gn)),e}function ds(){var e,r,a;return e=n,_n.test(i.charAt(n))?(r=i.charAt(n),n++):(r=t,c===0&&h(Wn)),r!==t?(Pn.test(i.charAt(n))?(a=i.charAt(n),n++):(a=t,c===0&&h($n)),a===t&&(a=null),e=nu(r,a)):(n=e,e=t),e}function ms(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Ht?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Kn)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function gs(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Vt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Zn)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function ws(){var e,r,a,s;return e=n,i.substr(n,5).toLowerCase()===qt?(r=i.substr(n,5),n+=5):(r=t,c===0&&h(Qn)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=r=[r,a]:(n=e,e=t)):(n=e,e=t),e}function Ne(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===Bt?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(Xn)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=ru():(n=e,e=t)):(n=e,e=t),e}function tt(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===jt?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(er)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=au():(n=e,e=t)):(n=e,e=t),e}function nt(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Yt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(tr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=uu():(n=e,e=t)):(n=e,e=t),e}function ys(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===zt?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(nr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=su():(n=e,e=t)):(n=e,e=t),e}function z(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Gt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(rr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=ou():(n=e,e=t)):(n=e,e=t),e}function re(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Wt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(ar)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=iu():(n=e,e=t)):(n=e,e=t),e}function rt(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===$t?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(ur)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=lu():(n=e,e=t)):(n=e,e=t),e}function at(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===Kt?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(sr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=cu():(n=e,e=t)):(n=e,e=t),e}function be(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Zt?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(or)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=fu():(n=e,e=t)):(n=e,e=t),e}function Ns(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===Qt?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(ir)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=pu():(n=e,e=t)):(n=e,e=t),e}function bs(){var e,r,a,s;return e=n,i.substr(n,9).toLowerCase()===Xt?(r=i.substr(n,9),n+=9):(r=t,c===0&&h(lr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=vu():(n=e,e=t)):(n=e,e=t),e}function xs(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===en?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(cr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=hu():(n=e,e=t)):(n=e,e=t),e}function ut(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===tn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(fr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=du():(n=e,e=t)):(n=e,e=t),e}function Ts(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===nn?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(pr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=mu():(n=e,e=t)):(n=e,e=t),e}function As(){var e,r,a,s;return e=n,i.substr(n,9).toLowerCase()===rn?(r=i.substr(n,9),n+=9):(r=t,c===0&&h(vr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=gu():(n=e,e=t)):(n=e,e=t),e}function Is(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===an?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(hr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=wu():(n=e,e=t)):(n=e,e=t),e}function Es(){var e,r,a,s;return e=n,i.substr(n,7).toLowerCase()===un?(r=i.substr(n,7),n+=7):(r=t,c===0&&h(dr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=yu():(n=e,e=t)):(n=e,e=t),e}function Ss(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===sn?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(mr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Nu():(n=e,e=t)):(n=e,e=t),e}function Cs(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===on?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(gr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=bu():(n=e,e=t)):(n=e,e=t),e}function _s(){var e,r,a,s;return e=n,i.substr(n,2).toLowerCase()===ln?(r=i.substr(n,2),n+=2):(r=t,c===0&&h(wr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=xu():(n=e,e=t)):(n=e,e=t),e}function st(){var e,r,a,s;return e=n,i.substr(n,8).toLowerCase()===cn?(r=i.substr(n,8),n+=8):(r=t,c===0&&h(yr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Tu():(n=e,e=t)):(n=e,e=t),e}function ot(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===fn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Nr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Au():(n=e,e=t)):(n=e,e=t),e}function it(){var e,r,a,s;return e=n,i.substr(n,5).toLowerCase()===pn?(r=i.substr(n,5),n+=5):(r=t,c===0&&h(br)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Iu():(n=e,e=t)):(n=e,e=t),e}function lt(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===vn?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(xr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Eu():(n=e,e=t)):(n=e,e=t),e}function ct(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===hn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Tr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Su():(n=e,e=t)):(n=e,e=t),e}function ft(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===dn?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(Ar)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Cu():(n=e,e=t)):(n=e,e=t),e}function U(){var e,r,a,s;return e=n,i.substr(n,6).toLowerCase()===mn?(r=i.substr(n,6),n+=6):(r=t,c===0&&h(Ir)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=_u():(n=e,e=t)):(n=e,e=t),e}function ae(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===gn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Er)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Pu():(n=e,e=t)):(n=e,e=t),e}function ue(){var e,r,a,s;return e=n,i.substr(n,3).toLowerCase()===wn?(r=i.substr(n,3),n+=3):(r=t,c===0&&h(Sr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Fu():(n=e,e=t)):(n=e,e=t),e}function pt(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===yn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Cr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Lu():(n=e,e=t)):(n=e,e=t),e}function vt(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===Nn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(_r)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Mu():(n=e,e=t)):(n=e,e=t),e}function Ps(){var e,r,a,s;return e=n,i.substr(n,4).toLowerCase()===bn?(r=i.substr(n,4),n+=4):(r=t,c===0&&h(Pr)),r!==t?(a=n,c++,s=y(),c--,s===t?a=void 0:(n=a,a=t),a!==t?e=Ou():(n=e,e=t)):(n=e,e=t),e}function se(){var e;return i.charCodeAt(n)===44?(e=xn,n++):(e=t,c===0&&h(Fr)),e}function _(){var e;return i.charCodeAt(n)===40?(e=Tn,n++):(e=t,c===0&&h(Lr)),e}function P(){var e;return i.charCodeAt(n)===41?(e=An,n++):(e=t,c===0&&h(Mr)),e}function f(){var e,r;for(e=[],r=ht();r!==t;)e.push(r),r=ht();return e}function ht(){var e;return Fn.test(i.charAt(n))?(e=i.charAt(n),n++):(e=t,c===0&&h(Or)),e}function Fs(){var e,r,a,s;if(e=n,(r=Ge())!==t&&(r=Du(r)),(e=r)===t)if(e=n,i.charCodeAt(n)===96?(r=_e,n++):(r=t,c===0&&h(Re)),r!==t){if(a=[],Fe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(Je)),s!==t)for(;s!==t;)a.push(s),Fe.test(i.charAt(n))?(s=i.charAt(n),n++):(s=t,c===0&&h(Je));else a=t;a!==t?(i.charCodeAt(n)===96?(s=_e,n++):(s=t,c===0&&h(Re)),s!==t?e=Ru(a):(n=e,e=t)):(n=e,e=t)}else n=e,e=t;return e}function Ls(e,r){return{type:"unary-expression",operator:e,expr:r}}function dt(e,r,a,s){var d={type:"binary-expression",operator:e,left:r,right:a};return s!==void 0&&(d.escape=s),d}function Ms(e,r){for(var a=[e],s=0;s<r.length;s++)a.push(r[s][3]);return a}function Os(e,r,a){return Ms(e,r)}function G(e,r){for(var a=e,s=0;s<r.length;s++)a=dt(r[s][1],a,r[s][3]);return a}if((m=I())!==t&&n===i.length)return m;throw m!==t&&n<i.length&&h(Ju()),ku(pe,M<i.length?i.charAt(M):null,M<i.length?He(M,M+1):He(M,M))}return l(u,Error),u.prototype.format=function(i){var v="Error: "+this.message;if(this.location){var m,t=null;for(m=0;m<i.length;m++)if(i[m].source===this.location.source){t=i[m].text.split(/\r\n|\n|\r/g);break}var w=this.location.start,A=this.location.source+":"+w.line+":"+w.column;if(t){var I=this.location.end,k=o("",w.line.toString().length," "),O=t[w.line-1],x=(w.line===I.line?I.column:O.length+1)-w.column||1;v+=`
 --> `+A+`
`+k+` |
`+w.line+" | "+O+`
`+k+" | "+o("",w.column-1," ")+o("",x,"^")}else v+=`
 at `+A}return v},u.buildMessage=function(i,v){var m={literal:function(x){return'"'+w(x.text)+'"'},class:function(x){var S=x.parts.map(function(L){return Array.isArray(L)?A(L[0])+"-"+A(L[1]):A(L)});return"["+(x.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};function t(x){return x.charCodeAt(0).toString(16).toUpperCase()}function w(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+t(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+t(S)})}function A(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+t(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+t(S)})}function I(x){return m[x.type](x)}function k(x){var S,L,C=x.map(I);if(C.sort(),C.length>0){for(S=1,L=1;S<C.length;S++)C[S-1]!==C[S]&&(C[L]=C[S],L++);C.length=L}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function O(x){return x?'"'+w(x)+'"':"end of input"}return"Expected "+k(i)+" but "+O(v)+" found."},{SyntaxError:u,parse:p}},(wt=Et).exports&&(wt.exports=yt());class Hs{static parse(u){return Et.exports.parse(u)}}const St=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Vs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,qs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Bs=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,js=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Ys=new Set(["current_timestamp","current_date","current_time"]);function H(l,u){return(l+="").length>=u?l:new Array(u-l.length+1).join("0")+l}function W(l,u,o="0",p="0",i="0",v="0",m="",t="0",w="0"){if(m==="+"||m==="-"){const A=`${H(parseInt(l,10),4)}-${H(parseInt(u,10),2)}-${H(parseInt(o,10),2)}`;let I="";parseFloat(v)<10&&(I="0");const k=`${H(parseInt(p,10),2)}:${H(parseInt(i,10),2)}:${I+parseFloat(v).toString()}`,O=`${m}${H(parseInt(t,10),2)}:${H(parseInt(w,10),2)}`;return new Date(A+"T"+k+O)}return new Date(parseInt(l,10),parseInt(u,10)-1,parseInt(o,10),parseInt(p,10),parseInt(i,10),parseFloat(v))}class zs{static makeBool(u){return _t(u)}static featureValue(u,o,p,i){return Ot(u,o,p,i)}static equalsNull(u){return u===null}static applyLike(u,o,p){return Ie(u,o,p)}static ensureArray(u){return Te(u)}static applyIn(u,o){return Ae(u,o)}static currentDate(){const u=new Date;return u.setHours(0,0,0,0),u}static makeSqlInterval(u,o,p){return F.createFromValueAndQualifer(u,o,p)}static convertInterval(u){return u instanceof F?u.valueInMilliseconds():u}static currentTimestamp(){return new Date}static compare(u,o,p){return Lt(u,o,p)}static calculate(u,o,p){return Mt(u,o,p)}static makeComparable(u){return J(u)}static evaluateFunction(u,o){return At(u,o)}static lookup(u,o){const p=o[u];return p===void 0?null:p}static between(u,o){return u==null||o[0]==null||o[1]==null?null:u>=o[0]&&u<=o[1]}static notbetween(u,o){return u==null||o[0]==null||o[1]==null?null:u<o[0]||u>o[1]}static ternaryNot(u){return oe(u)}static ternaryAnd(u,o){return Pt(u,o)}static ternaryOr(u,o){return Ft(u,o)}}class Ct{constructor(u,o){this.fieldsIndex=o,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Hs.parse(u);const{isStandardized:p,isAggregate:i,referencedFieldNames:v}=this._extractExpressionInfo(o);this._referencedFieldNames=v,this.isStandardized=p,this.isAggregate=i}static create(u,o){return new Ct(u,o)}get fieldNames(){return this._referencedFieldNames}testSet(u,o=j){const p={};for(const i of this.fieldNames)p[i]=u.map(v=>o.getAttribute(v,i));return!!this._evaluateNode(this.parseTree,{attributes:p},j)}calculateValue(u,o=j){const p=this._evaluateNode(this.parseTree,u,o);return p instanceof F?p.valueInMilliseconds()/864e5:p}calculateValueCompiled(u,o=j){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(u,this.parameters,o,this._datefields):mt("esri-csp-restrictions")?this.calculateValue(u,o):(this._compileMe(),this.parseTree._compiledVersion(u,this.parameters,o,this._datefields))}testFeature(u,o=j){return!!this._evaluateNode(this.parseTree,u,o)}testFeatureCompiled(u,o=j){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(u,this.parameters,o,this._datefields):mt("esri-csp-restrictions")?this.testFeature(u,o):(this._compileMe(),!!this.parseTree._compiledVersion(u,this.parameters,o,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,u=>{u.type==="current-time"?this._hasDateFunctions=!0:u.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Ys.has(u.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="function"&&u.add(o.name.toLowerCase())}),Array.from(u)}getExpressions(){const u=new Map;return this._visitAll(this.parseTree,o=>{if(o.type==="function"){const p=o.name.toLowerCase(),i=o.args.value[0];if(i.type==="column-reference"){const v=i.column,m=`${p}-${v}`;u.has(m)||u.set(m,{aggregateType:p,field:v})}}}),[...u.values()]}getVariables(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="parameter"&&u.add(o.value.toLowerCase())}),Array.from(u)}_compileMe(){const u="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",u).bind(zs)}_extractExpressionInfo(u){const o=[],p=new Set;let i=!0,v=!0;return this._visitAll(this.parseTree,m=>{var t;switch(m.type){case"column-reference":{const w=u==null?void 0:u.get(m.column);let A,I;w?A=I=(t=w.name)!=null?t:"":(I=m.column,A=I.toLowerCase()),w&&w.name&&(w.type==="date"||w.type==="esriFieldTypeDate")&&(this._datefields[w.name]=1),p.has(A)||(p.add(A),o.push(I)),m.column=I;break}case"function":{const{name:w,args:A}=m,I=A.value.length;i&&(i=Us(w,I)),v&&(v=Js(w,I));break}}}),{referencedFieldNames:Array.from(o),isStandardized:i,isAggregate:v}}_visitAll(u,o){if(u!=null)switch(o(u),u.type){case"when-clause":this._visitAll(u.operand,o),this._visitAll(u.value,o);break;case"case-expression":for(const p of u.clauses)this._visitAll(p,o);u.format==="simple"&&this._visitAll(u.operand,o),u.else!==null&&this._visitAll(u.else,o);break;case"expression-list":for(const p of u.value)this._visitAll(p,o);break;case"unary-expression":this._visitAll(u.expr,o);break;case"binary-expression":this._visitAll(u.left,o),this._visitAll(u.right,o);break;case"function":this._visitAll(u.args,o)}}evaluateNodeToJavaScript(u){switch(u.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(u.value)+", "+JSON.stringify(u.qualifier)+","+JSON.stringify(u.op)+")";case"case-expression":{let o="";if(u.format==="simple"){const p="this.makeComparable("+this.evaluateNodeToJavaScript(u.operand)+")";o="( ";for(let i=0;i<u.clauses.length;i++)o+=" ("+p+" === this.makeComparable("+this.evaluateNodeToJavaScript(u.clauses[i].operand)+")) ? ("+this.evaluateNodeToJavaScript(u.clauses[i].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}else{o="( ";for(let p=0;p<u.clauses.length;p++)o+=" this.makeBool("+this.evaluateNodeToJavaScript(u.clauses[p].operand)+")===true ? ("+this.evaluateNodeToJavaScript(u.clauses[p].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}return o}case"parameter":return"this.lookup("+JSON.stringify(u.value.toLowerCase())+",lookups)";case"expression-list":{let o="[";for(const p of u.value)o!=="["&&(o+=","),o+=this.evaluateNodeToJavaScript(p);return o+="]",o}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(u.expr)+")";case"binary-expression":switch(u.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")";case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")"}throw new Error("Not Supported Operator "+u.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(u.value);case"date":return"(new Date("+Nt(u.value).getTime().toString()+"))";case"timestamp":return"(new Date("+xe(u.value).getTime().toString()+"))";case"current-time":return u.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(u.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(u.name)+","+this.evaluateNodeToJavaScript(u.args)+")"}throw new Error("Unsupported sql syntax "+u.type)}_evaluateNode(u,o,p){switch(u.type){case"interval":{const i=this._evaluateNode(u.value,o,p);return F.createFromValueAndQualifer(i,u.qualifier,u.op)}case"case-expression":if(u.format==="simple"){const i=J(this._evaluateNode(u.operand,o,p));for(let v=0;v<u.clauses.length;v++)if(i===J(this._evaluateNode(u.clauses[v].operand,o,p)))return this._evaluateNode(u.clauses[v].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}else{for(let i=0;i<u.clauses.length;i++)if(_t(this._evaluateNode(u.clauses[i].operand,o,p)))return this._evaluateNode(u.clauses[i].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}return null;case"parameter":return this.parameters[u.value.toLowerCase()];case"expression-list":{const i=[];for(const v of u.value)i.push(this._evaluateNode(v,o,p));return i}case"unary-expression":return oe(this._evaluateNode(u.expr,o,p));case"binary-expression":switch(u.operator){case"AND":return Pt(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"OR":return Ft(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)===null;case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)!==null;case"IN":{const i=Te(this._evaluateNode(u.right,o,p));return Ae(this._evaluateNode(u.left,o,p),i)}case"NOT IN":{const i=Te(this._evaluateNode(u.right,o,p));return oe(Ae(this._evaluateNode(u.left,o,p),i))}case"BETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i>=J(v[0])&&i<=J(v[1])}case"NOTBETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i<J(v[0])||i>J(v[1])}case"LIKE":return Ie(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape);case"NOT LIKE":return oe(Ie(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return Lt(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"-":case"+":case"*":case"/":return Mt(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p))}case"null":case"boolean":case"string":case"number":return u.value;case"date":return Nt(u.value);case"timestamp":return xe(u.value);case"current-time":{const i=new Date;return u.mode==="date"&&i.setHours(0,0,0,0),i}case"column-reference":return Ot(o,u.column,this._datefields,p);case"function":{const i=this._evaluateNode(u.args,o,p);return this.isAggregate?Rs(u.name,i):At(u.name,i)}}throw new Error("Unsupported sql syntax "+u.type)}}function xe(l){let u=Vs.exec(l);if(u!==null){const[,o,p,i,v,m,t]=u;return W(o,p,i,v,m,t)}if(u=qs.exec(l),u!==null){const[,o,p,i,v,m,t,w,A,I]=u;return W(o,p,i,v,m,t,w,A,I)}if(u=Bs.exec(l),u!==null){const[,o,p,i,v,m,t,w,A]=u;return W(o,p,i,v,m,"0",t,w,A)}if(u=js.exec(l),u!==null){const[,o,p,i,v,m]=u;return W(o,p,i,v,m)}if(u=St.exec(l),u!==null){const[,o,p,i]=u;return W(o,p,i)}throw new Error("SQL Invalid Timestamp")}function Nt(l){const u=St.exec(l);if(u===null)try{return xe(l)}catch{throw new Error("SQL Invalid Date")}const[,o,p,i]=u;return new Date(parseInt(o,10),parseInt(p,10)-1,parseInt(i,10))}function _t(l){return l===!0}function Te(l){return Array.isArray(l)?l:[l]}function oe(l){return l!==null?l!==!0:null}function Pt(l,u){return l!=null&&u!=null?l===!0&&u===!0:l!==!1&&u!==!1&&null}function Ft(l,u){return l!=null&&u!=null?l===!0||u===!0:l===!0||u===!0||null}function Ae(l,u){if(l==null)return null;let o=!1;for(const p of u)if(p==null)o=null;else if(l===p){o=!0;break}return o}const bt="-[]/{}()*+?.\\^$|";var V;function Gs(l,u){const o=u;let p="",i=V.Normal;for(let v=0;v<l.length;v++){const m=l.charAt(v);switch(i){case V.Normal:m===o?i=V.Escaped:bt.includes(m)?p+="\\"+m:p+=m==="%"?".*":m==="_"?".":m;break;case V.Escaped:bt.includes(m)?p+="\\"+m:p+=m,i=V.Normal}}return new RegExp("^"+p+"$","m")}function Ie(l,u,o){return l==null?null:Gs(u,o).test(l)}function J(l){return l instanceof Date?l.valueOf():l}function Lt(l,u,o){if(u==null||o==null)return null;const p=J(u),i=J(o);switch(l){case"<>":return p!==i;case"=":return p===i;case">":return p>i;case"<":return p<i;case">=":return p>=i;case"<=":return p<=i}}function Mt(l,u,o){if(u instanceof F)if(o instanceof Date)switch(l){case"+":return new Date(u.valueInMilliseconds()+o.getTime());case"-":return u.valueInMilliseconds()-o.getTime();case"*":return u.valueInMilliseconds()*o.getTime();case"/":return u.valueInMilliseconds()/o.getTime()}else if(o instanceof F)switch(l){case"+":return F.createFromMilliseconds(u.valueInMilliseconds()+o.valueInMilliseconds());case"-":return F.createFromMilliseconds(u.valueInMilliseconds()-o.valueInMilliseconds());case"*":return u.valueInMilliseconds()*o.valueInMilliseconds();case"/":return u.valueInMilliseconds()/o.valueInMilliseconds()}else u=u.valueInMilliseconds();else if(o instanceof F)if(u instanceof Date)switch(l){case"+":return new Date(o.valueInMilliseconds()+u.getTime());case"-":return new Date(u.getTime()-o.valueInMilliseconds());case"*":return u.getTime()*o.valueInMilliseconds();case"/":return u.getTime()/o.valueInMilliseconds()}else o=o.valueInMilliseconds();else if(u instanceof Date&&typeof o=="number")switch(o=24*o*60*60*1e3,u=u.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}else if(o instanceof Date&&typeof u=="number")switch(u=24*u*60*60*1e3,o=o.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}switch(l){case"+":return u+o;case"-":return u-o;case"*":return u*o;case"/":return u/o}}function Ws(l){return l&&typeof l.attributes=="object"}function Ot(l,u,o,p){const i=p.getAttribute(l,u);return i!=null&&o[u]===1?new Date(i):i}(function(l){l[l.Normal=0]="Normal",l[l.Escaped=1]="Escaped"})(V||(V={}));const j={getAttribute:(l,u)=>(Ws(l)?l.attributes:l)[u]};export{Ct as WhereClause,j as defaultAttributeAdapter};
